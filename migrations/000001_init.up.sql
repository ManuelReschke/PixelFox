-- Insert initial user data
INSERT INTO `users` (`id`, `name`, `email`, `password`, `role`, `status`, `bio`, `avatar_url`, `ipv4`, `ipv6`, `activation_token`, `activation_sent_at`, `last_login_at`, `created_at`, `updated_at`, `deleted_at`) VALUES
(1, 'admin', 'admin@test.de', '$2a$10$snSiiIIhQmVFVfELdcE0GOSbpVKkpY0PRGfA1JANIetlyrkUp0Ui6', 'admin', 'active', NULL, NULL, NULL, NULL, NULL, NULL, '2025-03-15 12:02:34', '2024-10-09 19:06:20', '2025-03-15 12:02:34', NULL),
(2, 'test', 'test@test.de', '$2a$10$snSiiIIhQmVFVfELdcE0GOSbpVKkpY0PRGfA1JANIetlyrkUp0Ui6', 'user', 'active', NULL, NULL, NULL, NULL, NULL, NULL, '2025-04-29 17:53:04', '2024-10-09 19:07:44', '2025-04-29 17:53:04', NULL);

-- Insert initial page data
INSERT INTO `pages` (`id`, `title`, `slug`, `content`, `is_active`, `created_at`, `updated_at`, `deleted_at`) VALUES
(1, 'Über Uns', 'about', '<p>Willkommen bei PixelFox — der modernen Plattform zum Teilen und Verwalten von Bildern. Entwickelt in Go (Golang) und konsequent auf Geschwindigkeit, Stabilität und Skalierbarkeit ausgelegt. Unser Ziel ist klar: Wir wollen den schnellsten Imagehoster der Welt bereitstellen.</p> <p>In PixelFox stecken über zehn Jahre Erfahrung in der Softwareentwicklung und im Imagehosting. Erkenntnisse aus zahlreichen eigenen Projekten sowie etablierten CMS-Lösungen sind in eine schlanke Architektur und ein durchdachtes Bedienkonzept eingeflossen — für eine intuitive Nutzung, starke Sicherheit und verlässliche Performance.</p> <p>Ob Fotograf:in, Kreative:r oder Team: PixelFox bietet eine benutzerfreundliche und sichere Umgebung, in der Sie Ihre Bilder schnell präsentieren, organisieren und teilen können. Wir arbeiten kontinuierlich daran, PixelFox weiter zu verbessern und hoffen, Ihre Erwartungen an einen modernen Imagehoster nicht nur zu erfüllen, sondern zu übertreffen.</p>', 1, '2025-07-11 10:25:50', '2025-07-11 11:33:02', NULL),
(2, 'Kontakt', 'contact', '<p>Haben Sie Fragen oder Anregungen? Wir freuen uns auf Ihre Nachricht!</p><h2>Kontaktdaten</h2><p><strong>E-Mail:</strong> info@pixelfox.cc</p><p>Unser Support-Team ist von Montag bis Freitag von 9:00 bis 18:00 Uhr für Sie da.</p>', 1, '2025-07-11 10:25:50', '2025-07-11 11:33:02', NULL),
(3, 'Jobs', 'jobs', '<p>Werden Sie Teil unseres Teams! Wir suchen kreative und motivierte Menschen, die unsere Vision teilen.</p><h2>Aktuelle Stellenausschreibungen</h2><h3>-</h3><p>Aktuelle gibt es keine offenen Positionen</p><p>Interessiert? Senden Sie Ihre Bewerbung an: jobs@pixelfox.cc</p>', 1, '2025-07-11 10:25:50', '2025-07-11 11:33:02', NULL),
(4, 'AGB', 'agb', '<h1>Allgemeine Geschäftsbedingungen (AGB) für die Nutzung von Pixelfox.cc</h1><p><i>Stand: September 2025</i></p><h2>§ 1 Geltungsbereich und Vertragspartner</h2><p>(1) Diese Allgemeinen Geschäftsbedingungen (AGB) regeln die Nutzung des Online-Dienstes „Pixelfox.cc“ (nachfolgend „Pixelfox“ oder „Anbieter“). Pixelfox ist ein Imagehoster, der registrierten Nutzern das Hochladen, Speichern und Teilen digitaler Bilddateien ermöglicht. Vertragspartner ist der Betreiber von Pixelfox (Anbieterkennzeichnung im Impressum). Mit Registrierung bzw. Nutzung akzeptiert der Nutzer diese AGB.</p><p>(2) Es gilt das Recht der Bundesrepublik Deutschland. Bei Verbrauchern mit Wohnsitz in der EU bleiben zwingende verbraucherschützende Bestimmungen ihres Aufenthaltsstaates unberührt.</p><p>(3) Der Vertrag kommt mit Abschluss der Registrierung zustande. Ein Anspruch auf Abschluss besteht nicht; der Anbieter kann Registrierungen oder Uploads ablehnen. Nutzerkonten sind personengebunden und nicht übertragbar.</p><h2>§ 2 Registrierung, Nutzerkonto und Altersbeschränkung</h2><p>(1) Für die Nutzung der Upload-Funktionen ist eine Registrierung erforderlich. Der Nutzer macht wahrheitsgemäße Angaben und aktualisiert Änderungen unverzüglich. Pro Person ist nur ein Konto zulässig.</p><p>(2) Mindestalter: 18 Jahre. Der Nutzer versichert seine Volljährigkeit. Pornografische Inhalte dürfen Minderjährigen nicht zugänglich gemacht werden. Der Anbieter kann Altersverifikationsmaßnahmen einsetzen. Uploader sind verpflichtet, nicht jugendfreie Inhalte, sofern eine Funktion vorhanden ist, entsprechend zu kennzeichnen.</p><p>(3) Der Nutzer schützt seine Zugangsdaten. Handlungen über das Konto gelten als vom Nutzer veranlasst. Verdächtige Nutzung ist dem Anbieter unverzüglich mitzuteilen.</p><p>(4) Das Konto darf nur vom registrierten Nutzer verwendet werden. Eine Weitergabe der Zugangsdaten oder Mitnutzung durch Dritte ist untersagt.</p><p>(5) Der Nutzer kann das kostenlose Konto jederzeit kündigen; der Anbieter deaktiviert und löscht das Konto innerhalb angemessener Frist (gesetzliche Aufbewahrungspflichten bleiben unberührt). Bereits gezahlte Entgelte werden – vorbehaltlich gesetzlicher Rechte – nicht anteilig erstattet. Bei erheblichen oder wiederholten Verstößen kann der Anbieter fristlos kündigen.</p><h2>§ 3 Leistungsumfang</h2><p>(1) Pixelfox stellt Speicher- und Abrufmöglichkeiten für Bilder bereit. Für jedes Bild wird eine eindeutige URL generiert. Das Einbetten über Direktlinks (Hotlinking) ist grundsätzlich Bestandteil des Dienstes. Der Nutzer trägt die Verantwortung für die Veröffentlichung und Verbreitung der Links.</p><p>(2) Kostenlose Basisnutzung: Upload und Teilen in begrenztem Umfang. Nutzungsbeschränkungen (Speicher, Größe, Bandbreite, Upload-Anzahl u.Ä.) können festgelegt und angepasst werden. Ein Anspruch auf bestimmte Funktionen besteht nicht.</p><p>(3) Kostenpflichtige Pakete (Premium): Erweiterte Leistungen (z.B. mehr Speicher/Bandbreite, weniger/keine Werbung, erweiterte API) gemäß jeweils gültiger Leistungsbeschreibung. Es gelten zusätzlich die Regelungen in § 7.</p><p>(4) API: Zugriff per API-Schlüssel möglich. API-Nutzung kann auf Kontingente angerechnet werden. Missbrauch (z.B. Massenuploads, übermäßige Anfragen, Störung der Verfügbarkeit) ist untersagt. Der Anbieter kann den API-Zugang einschränken oder sperren und zusätzliche Nutzungsbedingungen vorgeben.</p><p>(5) Werbung: Der Anbieter ist berechtigt, im kostenlosen Angebot Werbung einzublenden. Derzeit erfolgt keine Werbung; dies kann zukünftig eingeführt werden. Premium-Tarife können werbefrei oder werbereduzierend sein.</p><p>(6) Verfügbarkeit: Hohe Verfügbarkeit wird angestrebt, aber nicht garantiert. Wartungen, Störungen oder Weiterentwicklungen können die Nutzung vorübergehend einschränken. Nutzer sollten eigene Sicherungskopien wichtiger Bilder vorhalten.</p><p>(7) Änderungen des Dienstes: Der Anbieter kann Funktionen erweitern, ändern oder einschränken, insbesondere zur Verbesserung oder zur Anpassung an rechtliche/technische Entwicklungen. Bei wesentlicher Einschränkung während eines laufenden Premium-Abos wird rechtzeitig informiert; es besteht ein Sonderkündigungsrecht.</p><h2>§ 4 Pflichten des Nutzers; verbotene Inhalte und Verhaltensweisen</h2><p>(1) Der Nutzer handelt gesetzes- und vertragskonform und beachtet Rechte Dritter (Urheber-, Marken-, Persönlichkeits-, Datenschutzrechte) sowie Straf- und Jugendschutzgesetze.</p><p>(2) Verbotene Inhalte sind insbesondere: illegale Pornografie (z.B. mit Minderjährigen, Gewaltpornografie, Tierpornografie), Gewaltverherrlichung, extremistische/volksverhetzende Inhalte, Aufrufe zu Straftaten, Hass, Beleidigung, verfassungsfeindliche Kennzeichen (soweit nicht gesetzlich erlaubt), Urheber- und Markenrechtsverletzungen, Persönlichkeitsrechts- und Datenschutzverletzungen, betrügerische oder sonst rechtswidrige Inhalte sowie Schadsoftware. Legale Pornografie ist zulässig, darf aber nur Erwachsenen zugänglich gemacht werden und muss gesetzlichen Vorgaben entsprechen.</p><p>(3) Missbräuchliche Nutzung ist untersagt, insbesondere Spam, Identitätsmissbrauch, Umgehung von Sicherheitsmaßnahmen, übermäßiger oder automatisierter Zugriff außerhalb zulässiger API-Nutzung, Handlungen zur Beeinträchtigung von Stabilität/Verfügbarkeit und technische Umgehung von Limits.</p><p>(4) Konsequenzen: Der Anbieter kann Inhalte löschen/sperren, Konten und API-Zugänge temporär oder dauerhaft sperren und das Vertragsverhältnis außerordentlich kündigen. Gesetzliche Melde- und Auskunftspflichten bleiben unberührt.</p><p>(5) Meldungen: Nutzer sollen verdächtige oder rechtswidrige Inhalte unverzüglich melden. Begründete rechtsverletzende Inhalte werden zeitnah entfernt oder gesperrt.</p><p>(6) Freistellung: Der Nutzer stellt den Anbieter von Ansprüchen Dritter frei, die aus vom Nutzer zu vertretenden Rechtsverletzungen resultieren, einschließlich angemessener Rechtsverfolgungskosten.</p><h2>§ 5 Inhalte, Nutzungsrechte und Entfernung</h2><p>(1) Keine allgemeine Überwachung: Der Anbieter prüft Nutzerinhalte nicht vorab und macht sie sich nicht zu Eigen. Bei Kenntnis konkreter Rechtsverletzungen werden Inhalte entfernt oder gesperrt.</p><p>(2) Rechte an Inhalten: Rechte an hochgeladenen Bildern verbleiben beim Nutzer. Der Nutzer räumt dem Anbieter die einfachen, räumlich unbeschränkten, für die Vertragsdauer notwendigen Rechte ein, um die Leistung zu erbringen (Speicherung, Vervielfältigung zu Betriebs-/Backup-/Cache-Zwecken, technische Bearbeitung wie Thumbnails/Formatkonvertierung/Kompression, öffentliche Zugänglichmachung, soweit vom Nutzer durch Freigabe/Link beabsichtigt).</p><p>(3) Sichtbarkeit: Inhalte können öffentlich, ungelistet oder privat sein (sofern verfügbar). Öffentliche Inhalte können von Suchmaschinen indexiert werden. Nach Löschung können Kopien Dritter weiterbestehen, ohne Einflussmöglichkeit des Anbieters.</p><p>(4) Entfernung/Sperrung: Der Anbieter ist berechtigt, Inhalte bei konkreten Anhaltspunkten für Rechts- oder AGB-Verstöße zu entfernen oder zu sperren und den Nutzer hierüber – soweit zumutbar – zu informieren.</p><p>(5) Speicherdauer: Inhalte werden grundsätzlich bis zur Löschung durch den Nutzer gespeichert. Inaktive oder sehr alte, nicht abgerufene Inhalte können nach Vorankündigung gelöscht werden. Nach Vertragsende können Inhalte vollständig gelöscht werden.</p><h2>§ 6 Datenschutz</h2><p>(1) Es gilt die auf der Website abrufbare Datenschutzerklärung mit Informationen nach DSGVO.</p><p>(2) Aus Sicherheits- und Missbrauchspräventionsgründen können IP-Adressen und Upload-Zeitpunkte protokolliert und mit dem Nutzerkonto verknüpft werden.</p><p>(3) Datenweitergabe an Behörden erfolgt nur bei gesetzlicher Verpflichtung oder auf behördliche/gerichtliche Anordnung.</p><p>(4) Autorisierte Mitarbeiter dürfen bei konkretem Anlass auf Inhalte zugreifen (z.B. zur Rechtsprüfung/Entfernung) und sind zur Vertraulichkeit verpflichtet.</p><p>(5) Es können Cookies/Tracker eingesetzt werden. Nicht notwendige Cookies werden nur mit Einwilligung gesetzt; Einstellungen sind im Cookie-Banner/Browser möglich.</p><h2>§ 7 Bedingungen für kostenpflichtige Dienste (Premium)</h2><p>(1) Vertragsschluss: Mit Bestellung eines Premium-Pakets gibt der Nutzer ein verbindliches Angebot ab. Der Vertrag kommt mit Bestätigung durch den Anbieter zustande.</p><p>(2) Leistungsumfang: Ergibt sich aus der jeweils aktuellen Leistungsbeschreibung. Anpassungen sind möglich; wesentliche Verschlechterungen werden rechtzeitig mitgeteilt, es besteht ggf. Sonderkündigungsrecht.</p><p>(3) Abonnement/Laufzeit: In der Regel automatische Verlängerung um den jeweiligen Zeitraum, sofern nicht fristgerecht gekündigt.</p><p>(4) Kündigung: Zum Ende der jeweiligen Laufzeit kündbar (über Kontofunktion oder in Textform). Bei Kündigung läuft das Paket bis Periodenende und wird dann auf den Free-Tarif zurückgestuft. Fristlose Kündigung aus wichtigem Grund bleibt unberührt.</p><p>(5) Preise/Zahlung: Preise inkl. gesetzlicher Umsatzsteuer, Zahlung im Voraus je Abrechnungsperiode. Automatische Abbuchung zu Periodenbeginn. Bei Zahlungsverzug können Premium-Funktionen gesperrt oder auf Free-Tarif zurückgestuft werden; weitere Ansprüche bleiben vorbehalten.</p><p>(6) Aufrechnung/Zurückbehaltung: Nur mit unbestrittenen oder rechtskräftig festgestellten Forderungen; Zurückbehaltung nur aus demselben Vertragsverhältnis.</p><p>(7) Leistungsbeginn: Freischaltung erfolgt in der Regel unverzüglich nach Zahlungsbestätigung.</p><p>(8) Widerrufsrecht für Verbraucher: Verbraucher haben bei Fernabsatzverträgen ein 14-tägiges Widerrufsrecht ab Vertragsschluss. Zur Ausübung genügt eine eindeutige Erklärung innerhalb der Frist. Der Anbieter erstattet innerhalb von 14 Tagen ab Eingang des Widerrufs. Das Widerrufsrecht kann bei digitalen Inhalten/Dienstleistungen vorzeitig erlöschen, wenn der Nutzer ausdrücklich zustimmt, dass vor Ablauf der Frist mit der Ausführung begonnen wird, und er
seine Kenntnis vom Erlöschen bestätigt; bei bereits erbrachten Leistungen ist ggf. Wertersatz zu leisten. Im Bestellprozess erfolgt eine gesonderte Belehrung.</p><h2>§ 8 Haftung</h2><p>(1) Für Nutzerinhalte haftet ausschließlich der Nutzer; der Anbieter haftet für fremde Inhalte nur nach den gesetzlichen Vorgaben ab Kenntnis der Rechtsverletzung.</p><p>(2) Keine Haftung für vorübergehende Nichtverfügbarkeit oder Datenverlust, soweit gesetzlich zulässig. Nutzer sollten eigene Sicherungskopien vorhalten.</p><p>(3) Unbeschränkte Haftung bei Verletzung von Leben, Körper, Gesundheit, bei Vorsatz und grober Fahrlässigkeit, nach Produkthaftungsgesetz sowie bei Garantie und Arglist.</p><p>(4) Bei einfacher Fahrlässigkeit haftet der Anbieter nur bei Verletzung wesentlicher Vertragspflichten und begrenzt auf den vertragstypischen, vorhersehbaren Schaden.</p><p>(5) Haftungshöchstsumme bei einfacher Fahrlässigkeit: Entgelte der letzten 12 Monate, mindestens 100 EUR; bei unentgeltlicher Nutzung 100 EUR. Ausgenommen sind Fälle unbeschränkter Haftung.</p><p>(6) Die Beschränkungen gelten zugunsten gesetzlicher Vertreter, Mitarbeiter und Erfüllungsgehilfen. Eine Beweislastumkehr ist damit nicht verbunden.</p><h2>§ 9 Vertragsdauer, Kündigung, Einstellung des Dienstes</h2><p>(1) Kostenloses Nutzungsverhältnis: Unbefristet; von beiden Seiten jederzeit kündbar.</p><p>(2) Premium-Verträge: Laufzeit und Kündigung gemäß § 7.</p><p>(3) Einstellung: Der Anbieter kann den Dienst aus wichtigem Grund einstellen und informiert Nutzer mindestens 30 Tage vorher. Vorausbezahlte Entgelte werden zeitanteilig erstattet. Nutzer sollten Daten vor Einstellung sichern.</p><h2>§ 10 Änderung dieser AGB</h2><p>(1) Der Anbieter kann diese AGB aus triftigem Grund mit Wirkung für die Zukunft ändern (z.B. Gesetzesänderung, Rechtsprechung, Funktionsanpassungen, Schließung von Regelungslücken).</p><p>(2) Änderungen werden mindestens 6 Wochen vor Inkrafttreten in Textform mitgeteilt. Widerspricht der Nutzer nicht innerhalb von 6 Wochen, gelten sie als angenommen; hierauf wird hingewiesen. Bei Widerspruch können beide Parteien das Nutzungsverhältnis beenden.</p><p>(3) Preisänderungen bei laufenden Premium-Verträgen werden rechtzeitig angekündigt; es gelten die Regelungen in § 7.</p><h2>§ 11 Schlussbestimmungen</h2><p>(1) Salvatorische Klausel: Die Unwirksamkeit einzelner Bestimmungen berührt die Wirksamkeit der übrigen nicht; es gelten die gesetzlichen Vorschriften an ihrer Stelle.</p><p>(2) Kommunikation: Textform (z.B. E-Mail) genügt, soweit gesetzlich keine strengere Form vorgeschrieben ist. Kontaktadresse gemäß Impressum. Der Nutzer hält seine E-Mail-Adresse aktuell.</p><p>(3) Kein Verzicht: Unterbleibt die Durchsetzung eines Rechts, folgt daraus kein Verzicht.</p><p>(4) Gerichtsstand: Ist der Nutzer Kaufmann, juristische Person des öffentlichen Rechts oder öffentlich-rechtliches Sondervermögen, ist ausschließlicher Gerichtsstand der Sitz des Anbieters (siehe Impressum). In allen anderen Fällen gelten die gesetzlichen Gerichtsstände.</p><p>(5) Hinweis zur Online-Streitbeilegung: Die Europäische Kommission stellt eine Plattform zur Online-Streitbeilegung bereit. Der Anbieter ist weder bereit noch verpflichtet, an einem Streitbeilegungsverfahren vor einer Verbraucherschlichtungsstelle teilzunehmen. Kontakt des Anbieters: info@pixelfox.cc.</p>', 1, '2025-09-19 15:06:25', '2025-09-19 15:24:18', NULL);

-- Insert initial settings
INSERT INTO `settings` (`id`, `setting_key`, `value`, `type`, `created_at`, `updated_at`) VALUES
(1, 'thumbnail_original_enabled', 'true', 'boolean', '2025-09-24 18:13:02', '2025-09-25 19:05:40'),
(2, 'thumbnail_webp_enabled', 'true', 'boolean', '2025-09-24 18:13:02', '2025-09-25 19:05:40'),
(3, 'thumbnail_avif_enabled', 'true', 'boolean', '2025-09-24 18:13:02', '2025-09-25 19:05:40'),
(4, 'upload_user_rate_limit_per_minute', '60', 'integer', '2025-09-24 18:22:54', '2025-09-25 19:05:40'),
(5, 'job_queue_worker_count', '2', 'integer', '2025-09-24 18:22:54', '2025-09-25 19:05:40'),
(6, 'site_title', 'PixelFox', 'string', '2025-09-24 18:22:54', '2025-09-25 19:05:40'),
(7, 'direct_upload_enabled', 'true', 'boolean', '2025-09-24 18:22:54', '2025-09-25 19:05:40'),
(8, 's3_backup_enabled', 'true', 'boolean', '2025-09-24 18:22:54', '2025-09-25 19:05:40'),
(9, 's3_backup_delay_minutes', '5', 'integer', '2025-09-24 18:22:54', '2025-09-25 19:05:40'),
(10, 's3_retry_interval', '2', 'integer', '2025-09-24 18:22:54', '2025-09-25 19:05:40'),
(11, 'api_rate_limit_per_minute', '200', 'integer', '2025-09-24 18:22:54', '2025-09-25 19:05:40'),
(12, 'site_description', 'Next Generation Imagehosting Platform', 'string', '2025-09-24 18:22:54', '2025-09-25 19:05:40'),
(13, 'upload_rate_limit_per_minute', '60', 'integer', '2025-09-24 18:22:54', '2025-09-25 19:05:40'),
(14, 's3_backup_check_interval', '5', 'integer', '2025-09-24 18:22:54', '2025-09-25 19:05:40'),
(15, 'replication_require_checksum', 'true', 'boolean', '2025-09-24 18:22:54', '2025-09-25 19:05:40'),
(16, 'image_upload_enabled', 'true', 'boolean', '2025-09-24 18:22:54', '2025-09-25 19:05:40');

-- Storage Pools
-- default storage
INSERT INTO `storage_pools` (`name`, `base_path`, `max_size`, `used_size`, `is_active`, `is_default`, `priority`, `storage_type`, `storage_tier`, `description`, `public_base_url`, `upload_api_url`, `node_id`, `created_at`, `updated_at`)
SELECT 'Default Local Storage', '/app/uploads', 107374182400, 0, 1, 1, 99, 'local', 'hot', 'Default hot storage pool for images and variants', 'http://localhost:8080', 'http://app:4000/api/internal/upload', 'local', NOW(), NOW()
WHERE NOT EXISTS (SELECT 1 FROM `storage_pools` WHERE `is_default` = 1);
-- s01 - hot storage
INSERT INTO `storage_pools` (`id`, `name`, `base_path`, `max_size`, `used_size`, `is_active`, `is_default`, `is_backup_target`, `priority`, `storage_type`, `storage_tier`, `description`, `s3_access_key_id`, `s3_secret_access_key`, `s3_region`, `s3_bucket_name`, `s3_endpoint_url`, `s3_path_prefix`, `public_base_url`, `upload_api_url`, `node_id`, `created_at`, `updated_at`) VALUES
(2, 'Server 1', '/app/uploads_s01', 53687091200, 0, 1, 0, 0, 1, 'local', 'hot', 'Hot Storage s01', NULL, NULL, NULL, NULL, NULL, '', 'http://localhost:8082', 'http://app_s01:4000/api/internal/upload', 's01', '2025-09-24 18:30:10', '2025-09-24 18:30:42');
-- s02 - hot storage
INSERT INTO `storage_pools` (`id`, `name`, `base_path`, `max_size`, `used_size`, `is_active`, `is_default`, `is_backup_target`, `priority`, `storage_type`, `storage_tier`, `description`, `s3_access_key_id`, `s3_secret_access_key`, `s3_region`, `s3_bucket_name`, `s3_endpoint_url`, `s3_path_prefix`, `public_base_url`, `upload_api_url`, `node_id`, `created_at`, `updated_at`) VALUES
(3, 'Server 2', '/app/uploads_s02', 322122547200, 0, 1, 0, 0, 2, 'local', 'warm', 'Warm Storage s02', NULL, NULL, NULL, NULL, NULL, '', 'http://localhost:8083', 'http://app_s02:4000/api/internal/upload', 's02', '2025-10-17 09:49:45', '2025-10-17 09:50:14');